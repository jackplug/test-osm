<!doctype html>
<html>
  <head>
    <title>Leaflet test</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
   integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
   crossorigin=""/>
   <style>
     #mapContainer { height: calc(100vh - 16px); width: calc(100vw - 30px); margin: auto; position: relative; }
     #mapid { position: absolute; top: 0; left: 0; right: 0; bottom: 0; }
   </style>
   <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
   integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
   crossorigin=""></script>
   <script src="js/leaflet-providers.js"></script>
  </head>
  <body>
    <div id="mapContainer">
<div id="mapid"></div></div>
<script>

(function() {
  var geoOptions = {
    enableHighAccuracy: true,
    timeout: 5000,
    maximumAge: 0
  },
  //[51.505, -0.09]
  setMap = function (coords) {
    var mymap = L.map('mapid').setView(coords, 13);
    L.tileLayer.provider('HERE.terrainDay', {
        app_id: 'XQZt4NRBBmW93Ezo2vak',
        app_code: 'iT8C5lNibDYrNho4SZac_Q'
    }).addTo(mymap);
    // L.tileLayer(
    //   'https://{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey=47acd53b6e334189987b602001c6d0c4', 
    //   {
    //     attribution: '&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    //     apikey: '47acd53b6e334189987b602001c6d0c4',
    //     maxZoom: 22
    //   }
    // ).addTo(mymap);
    // var marker = L.marker([51.5, -0.09]).addTo(mymap);
  };

  navigator.geolocation.getCurrentPosition(
    function (pos) {
      // setMap([51.505, -0.09]);
      setMap([pos.coords.latitude, pos.coords.longitude]);
      alert('accuracy of ' + pos.coords.accuracy + 'm');
    },
    function (err) {
      setMap([51.505, -0.09]);
    },
    geoOptions
  );

})();
</script>
  </body>
</html>
